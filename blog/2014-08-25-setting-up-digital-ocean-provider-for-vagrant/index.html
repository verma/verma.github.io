<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Setting up Digital Ocean provider for Vagrant | Uday Verma's Blog</title><meta name=keywords content><meta name=description content="Use Digital Ocean as a platform to provision your Vagrant instances."><meta name=author content><link rel=canonical href=https://udayv.com/blog/2014-08-25-setting-up-digital-ocean-provider-for-vagrant/><link href=/assets/css/stylesheet.min.3dac925eb9bf5bf78d5d4e966755e4f4ae8ca86c5a9a3d1dcff2aaef78333302.css integrity="sha256-PaySXrm/W/eNXU6WZ1Xk9K6MqGxamj0dz/Kq73gzMwI=" rel="preload stylesheet" as=style><link rel=icon href=https://udayv.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://udayv.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://udayv.com/favicon-32x32.png><link rel=apple-touch-icon href=https://udayv.com/apple-touch-icon.png><link rel=mask-icon href=https://udayv.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.80.0"><meta property="og:title" content="Setting up Digital Ocean provider for Vagrant"><meta property="og:description" content="Use Digital Ocean as a platform to provision your Vagrant instances."><meta property="og:type" content="article"><meta property="og:url" content="https://udayv.com/blog/2014-08-25-setting-up-digital-ocean-provider-for-vagrant/"><meta property="article:published_time" content="2014-08-25T00:00:00+00:00"><meta property="article:modified_time" content="2014-08-25T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Setting up Digital Ocean provider for Vagrant"><meta name=twitter:description content="Use Digital Ocean as a platform to provision your Vagrant instances."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Blogs","item":"https://udayv.com/blog/"},{"@type":"ListItem","position":2,"name":"Setting up Digital Ocean provider for Vagrant","item":"https://udayv.com/blog/2014-08-25-setting-up-digital-ocean-provider-for-vagrant/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Setting up Digital Ocean provider for Vagrant","name":"Setting up Digital Ocean provider for Vagrant","description":"Use Digital Ocean as a platform to provision your Vagrant instances.","keywords":[],"articleBody":"I recently tried provisioning a Digital Ocean instance using Vagrant and failed. All references on the Interwebs seem to be quiet old (from 2013) and seem to use V1 of the Digital Ocean API.\nIn this post I’ll detail the steps I followed to get one up and running.\nEnvironment These steps were tried on Mac OS X 10.9.4, I would hope that they apply to other *nix family of operating systems as well. I am running Vagrant v1.3.5 which I realize is not the most recent version.\nGet the right Plugin There seem to be two plugins out there digital_ocean and vagrant-digital_ocean. The latter worked for me.\nvagrant plugin install vagrant-digital_ocean  The other plugin still sets up things right (I could see it listed in ~/.vagrant.d/plugins.json but could never use it).\nOpenSSL and Certificates I installed OpenSSL using brew.\nbrew install openssl  which setup some paths for me under /usr/local/etc/openssl(homebrew specific).\nNow I needed a certificate file which OpenSSL could use to connect to Digital Ocean. Apparently, this file used to be provided as part of curl-ca-bundle homebrew bundle, but I couldn’t install it (Not found). Instead I used this URL to get it and un-tarred it into /usr/local/etc/openssl/certs. This gave me /usr/local/etc/openssl/certs/ca-bundle.crt file.\nConfigure Environment After the certificate file was setup, I modified my ~/.profile to include:\nexport SSL_CERT_FILE=/usr/local/etc/openssl/certs/ca-bundle.crt  Digital Ocean Access Token I then went to the Apps \u0026 API section on my Digital Ocean Web Interface and created a new Personal Access Token. Digital Ocean gave me a long hex string which I exported as an environment variable in my ~/.profile file:\nexport DIGITAL_OCEAN_ACCESS_TOKEN=\"...\"  I then re-sourced my ~/.profile:\n. ~/.profile  Digital Ocean Provider configuration in Vagrantfile Finally, I setup Digital Ocean configuration in my Vagrantfile:\nconfig.vm.provider :digital_ocean do |provider| raise RuntimeError, \"No Digital Ocean access token has been set. Set the DIGITAL_OCEAN_ACCESS_TOKEN environment variable.\" unless ENV[\"DIGITAL_OCEAN_ACCESS_TOKEN\"] provider.token = ENV[\"DIGITAL_OCEAN_ACCESS_TOKEN\"] provider.image = \"Ubuntu 14.04 x64\" provider.region = \"nyc2\" provider.ca_path = \"/usr/local/etc/openssl/certs/ca-bundle.crt\" provider.size = \"512MB\"; end Bringing up Vagrant I was then able to provision a Vagrant instance on Digital Ocean using:\nvagrant up --provider=digital_ocean  Things seemed to work fine thereafter. Hope this helps.\n","wordCount":"357","inLanguage":"en","datePublished":"2014-08-25T00:00:00Z","dateModified":"2014-08-25T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://udayv.com/blog/2014-08-25-setting-up-digital-ocean-provider-for-vagrant/"},"publisher":{"@type":"Organization","name":"Uday Verma's Blog","logo":{"@type":"ImageObject","url":"https://udayv.com/favicon.ico"}}}</script></head><body id=top><script>if(localStorage.getItem("pref-theme")==="dark"){document.body.classList.add('dark');}else if(localStorage.getItem("pref-theme")==="light"){document.body.classList.remove('dark')}else if(window.matchMedia('(prefers-color-scheme: dark)').matches){document.body.classList.add('dark');}</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://udayv.com/ accesskey=h title="Uday Verma's Blog (Alt + H)">Uday Verma's Blog</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu onscroll=menu_on_scroll()></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Setting up Digital Ocean provider for Vagrant</h1><section class=entry-tags><p>devops</p></section><div class=post-meta>August 25, 2014&nbsp;·&nbsp;2 min</div></header><div class=post-content><p>I recently tried provisioning a <a href=https://www.digitalocean.com>Digital Ocean</a> instance using <a href=https://www.vagrantup.com>Vagrant</a> and failed. All references on the Interwebs seem to be quiet old (from 2013) and seem to use V1 of the Digital Ocean API.</p><p>In this post I&rsquo;ll detail the steps I followed to get one up and running.</p><h3 id=environment>Environment<a hidden class=anchor aria-hidden=true href=#environment>#</a></h3><p>These steps were tried on <code>Mac OS X 10.9.4</code>, I would hope that they apply to other *nix family of operating systems as well. I am running <code>Vagrant v1.3.5</code> which I realize is not the most recent version.</p><h3 id=get-the-right-plugin>Get the right Plugin<a hidden class=anchor aria-hidden=true href=#get-the-right-plugin>#</a></h3><p>There seem to be two plugins out there <code>digital_ocean</code> and <code>vagrant-digital_ocean</code>. The latter worked for me.</p><pre><code>vagrant plugin install vagrant-digital_ocean
</code></pre><p>The other plugin still sets up things right (I could see it listed in <code>~/.vagrant.d/plugins.json</code> but could never use it).</p><h3 id=openssl-and-certificates>OpenSSL and Certificates<a hidden class=anchor aria-hidden=true href=#openssl-and-certificates>#</a></h3><p>I installed <code>OpenSSL</code> using <code>brew</code>.</p><pre><code>brew install openssl
</code></pre><p>which setup some paths for me under <code>/usr/local/etc/openssl</code>(homebrew specific).</p><p>Now I needed a certificate file which OpenSSL could use to connect to Digital Ocean. Apparently, this file used to be provided as part of <code>curl-ca-bundle</code> homebrew bundle, but I couldn&rsquo;t install it (Not found). Instead I used <a href=http://sourceforge.net/projects/machomebrew/files/mirror/curl-ca-bundle-1.87.tar.bz2/download>this URL</a> to get it and un-tarred it into <code>/usr/local/etc/openssl/certs</code>. This gave me <code>/usr/local/etc/openssl/certs/ca-bundle.crt</code> file.</p><h3 id=configure-environment>Configure Environment<a hidden class=anchor aria-hidden=true href=#configure-environment>#</a></h3><p>After the certificate file was setup, I modified my <code>~/.profile</code> to include:</p><pre><code>export SSL_CERT_FILE=/usr/local/etc/openssl/certs/ca-bundle.crt
</code></pre><h3 id=digital-ocean-access-token>Digital Ocean Access Token<a hidden class=anchor aria-hidden=true href=#digital-ocean-access-token>#</a></h3><p>I then went to the <em>Apps & API</em> section on my Digital Ocean Web Interface and created a new <em>Personal Access Token</em>. Digital Ocean gave me a long hex string which I exported as an environment variable in my <code>~/.profile</code> file:</p><pre><code>export DIGITAL_OCEAN_ACCESS_TOKEN=&quot;...&quot;
</code></pre><p>I then re-sourced my <code>~/.profile</code>:</p><pre><code>. ~/.profile
</code></pre><h3 id=digital-ocean-provider-configuration-in-vagrantfile>Digital Ocean Provider configuration in Vagrantfile<a hidden class=anchor aria-hidden=true href=#digital-ocean-provider-configuration-in-vagrantfile>#</a></h3><p>Finally, I setup Digital Ocean configuration in my <code>Vagrantfile</code>:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby>config<span style=color:#f92672>.</span>vm<span style=color:#f92672>.</span>provider <span style=color:#e6db74>:digital_ocean</span> <span style=color:#66d9ef>do</span> <span style=color:#f92672>|</span>provider<span style=color:#f92672>|</span>
    <span style=color:#66d9ef>raise</span> <span style=color:#66d9ef>RuntimeError</span>, <span style=color:#e6db74>&#34;No Digital Ocean access token has been set. Set the DIGITAL_OCEAN_ACCESS_TOKEN environment variable.&#34;</span> <span style=color:#66d9ef>unless</span> <span style=color:#66d9ef>ENV</span><span style=color:#f92672>[</span><span style=color:#e6db74>&#34;DIGITAL_OCEAN_ACCESS_TOKEN&#34;</span><span style=color:#f92672>]</span>

    provider<span style=color:#f92672>.</span>token <span style=color:#f92672>=</span> <span style=color:#66d9ef>ENV</span><span style=color:#f92672>[</span><span style=color:#e6db74>&#34;DIGITAL_OCEAN_ACCESS_TOKEN&#34;</span><span style=color:#f92672>]</span>
    provider<span style=color:#f92672>.</span>image <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Ubuntu 14.04 x64&#34;</span>
    provider<span style=color:#f92672>.</span>region <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;nyc2&#34;</span>
    provider<span style=color:#f92672>.</span>ca_path <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;/usr/local/etc/openssl/certs/ca-bundle.crt&#34;</span>
    provider<span style=color:#f92672>.</span>size <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;512MB&#34;</span>;
<span style=color:#66d9ef>end</span></code></pre></div><h3 id=bringing-up-vagrant>Bringing up Vagrant<a hidden class=anchor aria-hidden=true href=#bringing-up-vagrant>#</a></h3><p>I was then able to provision a Vagrant instance on Digital Ocean using:</p><pre><code>vagrant up --provider=digital_ocean
</code></pre><p>Things seemed to work fine thereafter. Hope this helps.</p></div><footer class=post-footer></footer></article></main><footer class=footer><span>&copy; 2021 <a href=https://udayv.com/>Uday Verma's Blog</a></span>
<span>&#183;</span>
<span>Powered by <a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a></span>
<span>&#183;</span>
<span>Theme <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script defer src=/assets/js/highlight.min.27cd435cc9ed6abb4b496581b151804f79f366c412620272bb94e2f5f598ebcc.js integrity="sha256-J81DXMntartLSWWBsVGAT3nzZsQSYgJyu5Ti9fWY68w=" onload=hljs.initHighlightingOnLoad();></script><script>window.onload=function(){if(localStorage.getItem("menu-scroll-position")){document.getElementById('menu').scrollLeft=localStorage.getItem("menu-scroll-position");}}
document.querySelectorAll('a[href^="#"]').forEach(anchor=>{anchor.addEventListener("click",function(e){e.preventDefault();var id=this.getAttribute("href").substr(1);if(!window.matchMedia('(prefers-reduced-motion: reduce)').matches){document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({behavior:"smooth"});}else{document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();}
if(id==="top"){history.replaceState(null,null," ");}else{history.pushState(null,null,`#${id}`);}});});var mybutton=document.getElementById("top-link");window.onscroll=function(){if(document.body.scrollTop>800||document.documentElement.scrollTop>800){mybutton.style.visibility="visible";mybutton.style.opacity="1";}else{mybutton.style.visibility="hidden";mybutton.style.opacity="0";}};function menu_on_scroll(){localStorage.setItem("menu-scroll-position",document.getElementById('menu').scrollLeft);}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{if(document.body.className.includes("dark")){document.body.classList.remove('dark');localStorage.setItem("pref-theme",'light');}else{document.body.classList.add('dark');localStorage.setItem("pref-theme",'dark');}})</script></body></html>